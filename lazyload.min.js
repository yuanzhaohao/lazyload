"use strict";(function(t,e){"use strict";if(typeof define==="function"&&define.amd){define([],e)}else if(typeof exports==="object"){module.exports=e()}else{t.Lazyload=e()}})(this,function(){var t=window,e=document,n=0,r=function(){};var i=function(){var t={};var e=Object.prototype;var n=e.toString,r=e.hasOwnProperty;var i=Object.keys,o=Array.isArray;t.isObject=function(t){var e=typeof t;return e==="function"||e==="object"&&!!t};t.isElement=function(t){return!!(t&&t.nodeType===1)};t.isArray=o||function(t){return n.call(t)==="[object Array]"};t.has=function(t,e){return t!==null&&r.call(t,e)};t.keys=function(e){if(!t.isObject){return[]}if(i){i(e)}var n=[];for(var r in e){if(t.has(e,r)){n.push(r)}}return n};t.extend=function(e,n){if(!n){return e}var r=t.keys(e),i=r.length,o;while(i--){o=r[i];if(n[o]!==undefined){e[o]=n[o]}}return e};t.each=function(e,n,r){var i,o;if(t.isArray(e)){for(i=0,o=e.length;i<o;i++){n.call(r,e[i],i,e)}}else{var a=t.keys(e);for(i=0,o=a.length;i<o;i++){n.call(r,e[a[i]],a[i],e)}}return e};t.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){t["is"+e]=function(t){return n.call(t)==="[object "+e+"]"}});t.isEmpty=function(e){if(e===null){return true}if(t.isArray(e)||t.isString(e)){return e.length===0}return t.keys(e).length===0};t.filter=function(e,n,r){var i=[];t.each(e,function(t,e,o){if(n.call(r,t,e,o)){i.push(t)}});return i};t.now=Date.now||function(){return(new Date).getTime()};t.later=function(t,e,n,r){var i=function(){t.apply(n,r)},o=setTimeout(i,e);return{id:o,cancel:function(){clearTimeout(o)}}};t.buffer=function(e,n,r){var i=null;n=n||150;if(t.isString(e)){e=r[e]}function o(){o.stop();i=t.later(e,n,r,arguments)}o.stop=function(){if(i){i.cancel();i=0}};return o};t.throttle=function(e,n,r){var i=0,o=0,a=null;n=n||150;if(t.isString(e)){e=r[e]}function u(){u.stop();i=t.now();e.apply(r||this,arguments);o=t.now()}u.stop=function(){if(a){a.cancel();a=0}};return function(){if(!i||o>=i&&t.now()-o>n||o<i&&t.now()-i>n*8){u()}else{if(a){a.cancel()}a=t.later(u,n,r,arguments)}}};function a(t){return function(e,n,r){r=r||0;var i=0,o=e.length;if(t>0){i=r>=0?r:Math.max(r+o,i)}else{o=r>=0?Math.min(r+1,o):r+o+1}for(r=t>0?i:o-1;r>=0&&r<o;r+=t){if(e[r]===n){return r}}return-1}}t.indexOf=a(1);t.lastIndexOf=a(-1);return t}(window,document,undefined);function o(t){var n=t,r=0,i=0;while(n!==null&&n!==e){r+=n.offsetLeft;i+=n.offsetTop;n=n.offsetParent}return{left:r,top:i}}function a(t,e,n){var r=t.length;function i(){r?t[--r].call(null,e,i):n(e)}i()}function u(t){return this instanceof u?this._init.call(this,t):new u(t)}u.prototype={constructor:u,_init:function(t){var e=this;var n={attribute:"data-lazyload",diff:100,autoDestroy:true,duration:300,onStart:null};e.element=document;e.attribute=i.isString(t.attribute)?t.attribute:n.attribute;e.diff=t.diff===undefined?n.diff:t.diff;e.diff=e._getBoundingRect();e.autoDestroy=t.autoDestroy===undefined?n.autoDestroy:t.autoDestroy;e.duration=i.isNumber(t.duration)&&t.duration>0?t.duration:n.duration;e.onStart=i.isFunction(t.onStart)?t.onStart:n.onStart;e._callbacks={};e._startListeners=[];e._initLoadEvent();e.addElements(e.element);e._loadFn();e.resume();e._init=null},_getBoundingRect:function(){var t=this,e=t.diff;if(!i.isObject(e)){e={top:e,right:e,bottom:e,left:e}}return e},_initLoadEvent:function(){var t=this,e=t.autoDestroy,n=t.duration,r=t.attribute;t.addStartListener(function(e,n){t.onStart&&t.onStart.apply(this,arguments);n&&n()});t.imgHandle=function(){var e=this,n={type:"img",elem:e,src:e.getAttribute(r)};a(t._startListeners,n,function(t){if(t.src&&e.src!==t.src){e.src=t.src}e.removeAttribute(r)})};t._loadFn=i.throttle(function(){if(e&&i.isEmpty(t._callbacks)){t.destroy()}t._loadItems()},n,t)},_loadItems:function(){var t=this,e=t._callbacks;i.each(e,function(e,n){e&&t._loadItem(n,e)})},_loadItem:function(t,e){var n=this;e=e||n._callbacks[t];if(!e){return true}var r=e.el,i=e.fn,o=false;if(n.__inViewport(r)){try{o=i.call(r)}catch(a){setTimeout(function(){throw a},0)}}if(o!==false){delete n._callbacks[t]}return o},__inViewport:function(e){var n=this,r=o(e),i=n.diff,a=t.innerWidth,u=t.innerHeight,f=t.scrollX,s=t.scrollY;return!(u+s<=r.top-i.bottom)&&!(a+f<=r.left-i.right)&&!(s>=r.top+e.offsetHeight+i.top)&&!(f>r.left+e.offsetWidth+i.left)},resume:function(){var e=this,n=e._loadFn;if(e._destroyed){return}t.addEventListener("scroll",n,false);t.addEventListener("touchmove",n,false);t.addEventListener("resize",n,false)},pause:function(){var e=this,n=e._loadFn;if(e._destroyed){return}t.removeEventListener("scroll",n,false);t.removeEventListener("touchmove",n,false);t.removeEventListener("resize",n,false)},destroy:function(){var t=this;t.pause();t._callbacks={};t._destroyed=1},refresh:function(){this._loadFn()},addCallback:function(t,o){if(!i.isElement(t)){return}var a=this,u=a._callbacks,f={el:t||e,fn:o||r},s=++n;u[s]=f;a._loadItem(s,f);return s},removeCallback:function(t,e){if(!i.isElement(t)){return}var n=this,r=n._callbacks;i.each(r,function(n,i){if(t===n.el&&(e?e===n.fn:1)){delete r[i]}})},addElements:function(t){var n=this,r=n.attribute;if(i.isString(t)){t=e.querySelectorAll(t)}else if(!i.isArray(t)&&t.length){t=i.filter(t,function(t){return t})}else if(!i.isArray(t)){t=[t]}i.each(t,function(t){if(!t){return}var e=i.filter(t.querySelectorAll("img"),function(t){return t});i.each(i.filter([t].concat(e),function(t){return t.getAttribute&&t.getAttribute(r)},n),function(t){n.addCallback(t,n.imgHandle)})})},removeElements:function(t){var n=this,r=n._callbacks;if(i.isString(t)){t=e.querySelectorAll(t)}else if(!i.isArray(t)&&t.length){t=i.filter(t,function(t){return t})}else if(!i.isArray(t)){t=[t]}i.each(r,function(e,n){if(i.indexOf(t,e.el)!==-1){delete r[n]}})},getElements:function(){var t=this,e=[],n=t._callbacks;i.each(n,function(t){t.el&&e.push(t.el)});return e},addStartListener:function(t){var e=this,n=e._startListeners;if(!t||i.indexOf(n,t)!==-1){return}n.push(t)}};var f;u.instance=function(){return f||(f=new u({autoDestroy:false}))};return u});